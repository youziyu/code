<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>今天天气不错</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }
    
    #box {
      width: 100px;
      height: 100px;
      background-color: red;
      position: absolute;
      /*left: 50px;*/
    }
  </style>
</head>
<body>
<button id="btn1">运动到200</button>
<button id="btn2">运动到400</button>
<div id="box"></div>
<script>
  //1 获取元素
  var box = document.getElementById("box");
  var btn1 = document.getElementById("btn1");
  var btn2 = document.getElementById("btn2");
  var timer = null;
  //var leftVal = 0;//手动设置box的初始值，这种操作不好维护
  //可以使用一个属性直接获取需要的值 offsetLeft:当前元素到定位父盒子的左侧距离
  
  //2 点击按钮1 让box运动到200
  btn1.onclick = function () {
    animate(box, 200);
  };
  
  
  //点击按钮2 让box运动到400
  btn2.onclick = function () {
    animate(box, 400);
  };
  
  /**
   * 让某一个标签，运动到left为几的位置上
   * @param tag 要运动的标签
   * @param target 运动到的left值
   */
  function animate(tag, target) {
    clearInterval(timer);//防止加速
    timer = setInterval(function () {
      //1 获取offsetLeft和step的设置
      var leader = tag.offsetLeft;
      var step = 10;//步数如果一直为正数，导致无法进行后退
      //1.1 step的正负设置根据leader和target的关系
      //step = target>leader?step:-step;
      step = leader > target ? -step : step;//与上一种相同
      
      //4 给运动设置条件
      if (leader != target) {//如果没有运动到指定位置，就进行运动
        //2 根据运动公式计算新的位置
        leader = leader + step;
        //3 将新的位置设置给box
        tag.style.left = leader + "px";
      } else {
        //5 设置停止
        clearInterval(timer);
      }
    }, 17);
  }


</script>
</body>
</html>